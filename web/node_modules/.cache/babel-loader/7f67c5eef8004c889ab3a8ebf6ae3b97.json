{"ast":null,"code":"import _slicedToArray from\"/mnt/c/Users/ShaKi/OneDrive/Escritorio/pruebas/what-do-we-eat-today/web/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from'react';import{Route,Routes}from'react-router-dom';import'../styles/App.scss';import Header from'./Header';import Main from'./Main';import Login from'./Login';import SingIn from'./SingIn';// services\nimport singIn from'../services/singIn';import ls from'../services/ls';import router from'../services/router';import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var App=function App(){var _useState=useState(ls.get('userId')),_useState2=_slicedToArray(_useState,2),userId=_useState2[0],setUserId=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),userName=_useState4[0],setUserName=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),userEmail=_useState6[0],setUserEmail=_useState6[1];var _useState7=useState(''),_useState8=_slicedToArray(_useState7,2),userPassword=_useState8[0],setUserPassword=_useState8[1];// state: sign up\nvar _useState9=useState(''),_useState10=_slicedToArray(_useState9,2),signUpErrorMessage=_useState10[0],setSignUpErrorMessage=_useState10[1];useEffect(function(){if(userId!==''){singIn.getProfileFromApi(userId).then(function(response){setUserName(response.name);setUserEmail(response.email);setUserPassword(response.password);});}ls.set('userId',userId||'');},[userId]);var sendSingUpToApi=function sendSingUpToApi(data){// Limpiamos el error antes de enviar los datos al API\nsetSignUpErrorMessage('');// Enviamos los datos al API\nsingIn.sendSingUpToApi(data).then(function(response){if(response.success===true){setUserId(response.userId);// Si la usuaria introduce bien sus datos redireccionamos desde la página de signup al inicio de la página\nrouter.redirect('/');}else{// Si la usuaria introduce mal sus datos guardamos el error que nos devuelve el API para que se pinte en la página\nsetSignUpErrorMessage(response.errorMessage);}});};return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"body\",{children:/*#__PURE__*/_jsxs(Routes,{children:[/*#__PURE__*/_jsx(Route,{path:\"/\",element:/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Header,{}),/*#__PURE__*/_jsx(Main,{})]})}),/*#__PURE__*/_jsx(Route,{path:\"/login\",element:/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Header,{}),/*#__PURE__*/_jsx(Login,{})]})}),/*#__PURE__*/_jsx(Route,{path:\"/signin\",element:/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(SingIn,{signUpErrorMessage:signUpErrorMessage,sendSingUpToApi:sendSingUpToApi})})})]})})});};export default App;","map":{"version":3,"names":["React","useEffect","useState","Route","Routes","Header","Main","Login","SingIn","singIn","ls","router","App","get","userId","setUserId","userName","setUserName","userEmail","setUserEmail","userPassword","setUserPassword","signUpErrorMessage","setSignUpErrorMessage","getProfileFromApi","then","response","name","email","password","set","sendSingUpToApi","data","success","redirect","errorMessage"],"sources":["/mnt/c/Users/ShaKi/OneDrive/Escritorio/pruebas/what-do-we-eat-today/web/src/components/App.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { Route, Routes } from 'react-router-dom';\n\nimport '../styles/App.scss';\nimport Header from './Header';\nimport Main from './Main';\nimport Login from './Login';\nimport SingIn from './SingIn';\n\n// services\n\nimport singIn from '../services/singIn';\nimport ls from '../services/ls';\nimport router from '../services/router';\n\n\n\n\nconst App = () => {\n\n  const [userId, setUserId] = useState(ls.get('userId'));\n  const [userName, setUserName] = useState('');\n  const [userEmail, setUserEmail] = useState('');\n  const [userPassword, setUserPassword] = useState('');\n  // state: sign up\n  const [signUpErrorMessage, setSignUpErrorMessage] = useState('');\n\n  useEffect(() => {\n    if (userId !== '') {\n      singIn.getProfileFromApi(userId).then(response => {\n        setUserName(response.name);\n        setUserEmail(response.email);\n        setUserPassword(response.password);\n      });\n    }\n    ls.set('userId', userId || '');\n  }, [userId]);\n\n  const sendSingUpToApi = data => {\n    // Limpiamos el error antes de enviar los datos al API\n    setSignUpErrorMessage('');\n    // Enviamos los datos al API\n    singIn.sendSingUpToApi(data).then(response => {\n      if (response.success === true) {\n        setUserId(response.userId);\n        // Si la usuaria introduce bien sus datos redireccionamos desde la página de signup al inicio de la página\n        router.redirect('/');\n      } else {\n        // Si la usuaria introduce mal sus datos guardamos el error que nos devuelve el API para que se pinte en la página\n        setSignUpErrorMessage(response.errorMessage);\n      }\n    });\n  };\n\n\n  return (\n    <div>\n      <body><Routes>\n        <Route path=\"/\" element={\n          <>\n            <Header />\n            <Main />\n          </>}>\n        </Route>\n        <Route path=\"/login\" element={\n          <>\n            <Header />\n            <Login />\n          </>\n        }>\n        </Route>\n        <Route path=\"/signin\" element={\n          <>\n            <SingIn signUpErrorMessage={signUpErrorMessage} sendSingUpToApi={sendSingUpToApi} />\n          </>\n        }></Route>\n      </Routes>\n      </body>\n    </div>\n  );\n}\n\nexport default App;"],"mappings":"6JAAA,MAAOA,MAAP,EAAgBC,SAAhB,CAA2BC,QAA3B,KAA2C,OAA3C,CACA,OAASC,KAAT,CAAgBC,MAAhB,KAA8B,kBAA9B,CAEA,MAAO,oBAAP,CACA,MAAOC,OAAP,KAAmB,UAAnB,CACA,MAAOC,KAAP,KAAiB,QAAjB,CACA,MAAOC,MAAP,KAAkB,SAAlB,CACA,MAAOC,OAAP,KAAmB,UAAnB,CAEA;AAEA,MAAOC,OAAP,KAAmB,oBAAnB,CACA,MAAOC,GAAP,KAAe,gBAAf,CACA,MAAOC,OAAP,KAAmB,oBAAnB,C,6IAKA,GAAMC,IAAG,CAAG,QAANA,IAAM,EAAM,CAEhB,cAA4BV,QAAQ,CAACQ,EAAE,CAACG,GAAH,CAAO,QAAP,CAAD,CAApC,wCAAOC,MAAP,eAAeC,SAAf,eACA,eAAgCb,QAAQ,CAAC,EAAD,CAAxC,yCAAOc,QAAP,eAAiBC,WAAjB,eACA,eAAkCf,QAAQ,CAAC,EAAD,CAA1C,yCAAOgB,SAAP,eAAkBC,YAAlB,eACA,eAAwCjB,QAAQ,CAAC,EAAD,CAAhD,yCAAOkB,YAAP,eAAqBC,eAArB,eACA;AACA,eAAoDnB,QAAQ,CAAC,EAAD,CAA5D,0CAAOoB,kBAAP,gBAA2BC,qBAA3B,gBAEAtB,SAAS,CAAC,UAAM,CACd,GAAIa,MAAM,GAAK,EAAf,CAAmB,CACjBL,MAAM,CAACe,iBAAP,CAAyBV,MAAzB,EAAiCW,IAAjC,CAAsC,SAAAC,QAAQ,CAAI,CAChDT,WAAW,CAACS,QAAQ,CAACC,IAAV,CAAX,CACAR,YAAY,CAACO,QAAQ,CAACE,KAAV,CAAZ,CACAP,eAAe,CAACK,QAAQ,CAACG,QAAV,CAAf,CACD,CAJD,EAKD,CACDnB,EAAE,CAACoB,GAAH,CAAO,QAAP,CAAiBhB,MAAM,EAAI,EAA3B,EACD,CATQ,CASN,CAACA,MAAD,CATM,CAAT,CAWA,GAAMiB,gBAAe,CAAG,QAAlBA,gBAAkB,CAAAC,IAAI,CAAI,CAC9B;AACAT,qBAAqB,CAAC,EAAD,CAArB,CACA;AACAd,MAAM,CAACsB,eAAP,CAAuBC,IAAvB,EAA6BP,IAA7B,CAAkC,SAAAC,QAAQ,CAAI,CAC5C,GAAIA,QAAQ,CAACO,OAAT,GAAqB,IAAzB,CAA+B,CAC7BlB,SAAS,CAACW,QAAQ,CAACZ,MAAV,CAAT,CACA;AACAH,MAAM,CAACuB,QAAP,CAAgB,GAAhB,EACD,CAJD,IAIO,CACL;AACAX,qBAAqB,CAACG,QAAQ,CAACS,YAAV,CAArB,CACD,CACF,CATD,EAUD,CAdD,CAiBA,mBACE,kCACE,mCAAM,MAAC,MAAD,yBACJ,KAAC,KAAD,EAAO,IAAI,CAAC,GAAZ,CAAgB,OAAO,cACrB,wCACE,KAAC,MAAD,IADF,cAEE,KAAC,IAAD,IAFF,GADF,EADI,cAOJ,KAAC,KAAD,EAAO,IAAI,CAAC,QAAZ,CAAqB,OAAO,cAC1B,wCACE,KAAC,MAAD,IADF,cAEE,KAAC,KAAD,IAFF,GADF,EAPI,cAcJ,KAAC,KAAD,EAAO,IAAI,CAAC,SAAZ,CAAsB,OAAO,cAC3B,sCACE,KAAC,MAAD,EAAQ,kBAAkB,CAAEb,kBAA5B,CAAgD,eAAe,CAAES,eAAjE,EADF,EADF,EAdI,GAAN,EADF,EADF,CAyBD,CA9DD,CAgEA,cAAenB,IAAf"},"metadata":{},"sourceType":"module"}